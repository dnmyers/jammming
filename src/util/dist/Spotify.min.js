"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var accessToken="",client_id="f1b58fbb435f44a28aa866b0aaf93a88",redirect_uri="http://localhost:3000/",Spotify={getAccessToken:function(){if(accessToken)return accessToken;var t=window.location.href.match(/access_token=([^&]*)/),e=window.location.href.match(/expires_in=([^&]*)/);if(t&&e){accessToken=t[1];var n=Number(e[1]);return window.setTimeout(function(){return accessToken=""},1e3*n),window.history.pushState("Access Token",null,"/"),accessToken}var o="https://accounts.spotify.com/authorize?client_id=".concat(client_id,"&response_type=token&scope=playlist-modify-public&redirect_uri=").concat(redirect_uri);window.location=o},search:function(t){var e=Spotify.getAccessToken();return fetch("https://api.spotify.com/v1/search?type=track&q=".concat(t),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(t){return t.json()}).then(function(t){return t.tracks?t.tracks.items.map(function(t){return{id:t.id,name:t.name,artist:t.artists[0].name,album:t.album.name,uri:t.uri}}):[]})},savePlaylist:function(e,n){if(e&&n.length){var o,t=Spotify.getAccessToken(),c={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/me",{headers:c}).then(function(t){return t.json()}).then(function(t){return o=t.id,fetch("https://api.spotify.com/v1/users/".concat(o,"/playlists"),{headers:c,method:"POST",body:JSON.stringify({name:e})}).then(function(t){return t.json()}).then(function(t){var e=t.id;return fetch("https://api.spotify.com/v1/users/".concat(o,"/playlists/").concat(e,"/tracks"),{headers:c,method:"POST",body:JSON.stringify({uris:n})}).then(function(t){return t.json()})})})}}},_default=Spotify;exports.default=_default;
//# sourceMappingURL=Spotify.min.js.map
